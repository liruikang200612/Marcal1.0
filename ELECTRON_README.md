# MarCal æ¡Œé¢åº”ç”¨

MarCal æ˜¯ä¸€ä¸ªè·¨åŒºåŸŸè¥é”€æ—¥å†åº”ç”¨ï¼Œç°åœ¨æ”¯æŒæ¡Œé¢ç‰ˆæœ¬ï¼

## åŠŸèƒ½ç‰¹æ€§

- ğŸ“… è¥é”€æ—¥å†ç®¡ç†
- ğŸŒ è·¨åŒºåŸŸæ”¯æŒ
- ğŸ’¾ æœ¬åœ°æ•°æ®å­˜å‚¨ï¼ˆé€šè¿‡ Supabaseï¼‰
- ğŸ–¥ï¸ åŸç”Ÿæ¡Œé¢ä½“éªŒ
- ğŸ”„ å®æ—¶åŒæ­¥

## å¼€å‘ç¯å¢ƒè®¾ç½®

### å‰ç½®è¦æ±‚

- Node.js (ç‰ˆæœ¬ 16 æˆ–æ›´é«˜)
- npm æˆ– yarn

### å®‰è£…ä¾èµ–

```bash
# å®‰è£…ä¸»é¡¹ç›®ä¾èµ–
npm install

# å®‰è£… Electron ä¾èµ–
cd electron
npm install
cd ..
```

### å¼€å‘æ¨¡å¼è¿è¡Œ

```bash
# å¯åŠ¨å¼€å‘æœåŠ¡å™¨å’Œ Electron åº”ç”¨
npm run electron:dev
```

è¿™ä¸ªå‘½ä»¤ä¼šï¼š
1. å¯åŠ¨ Vite å¼€å‘æœåŠ¡å™¨ (http://localhost:5173)
2. ç­‰å¾…æœåŠ¡å™¨å¯åŠ¨å®Œæˆ
3. å¯åŠ¨ Electron åº”ç”¨å¹¶åŠ è½½å¼€å‘æœåŠ¡å™¨

### æ„å»ºæ¡Œé¢åº”ç”¨

```bash
# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run electron:pack
```

æˆ–è€…æ„å»ºåˆ†å‘ç‰ˆæœ¬ï¼š

```bash
# æ„å»ºç”¨äºåˆ†å‘çš„ç‰ˆæœ¬
npm run electron:dist
```

## é¡¹ç›®ç»“æ„

```
DocumentBuilder/
â”œâ”€â”€ client/                 # React å‰ç«¯ä»£ç 
â”œâ”€â”€ server/                 # Express åç«¯ä»£ç 
â”œâ”€â”€ electron/              # Electron ç›¸å…³æ–‡ä»¶
â”‚   â”œâ”€â”€ main.js           # Electron ä¸»è¿›ç¨‹
â”‚   â”œâ”€â”€ preload.js        # é¢„åŠ è½½è„šæœ¬
â”‚   â”œâ”€â”€ package.json      # Electron é…ç½®
â”‚   â””â”€â”€ assets/           # åº”ç”¨èµ„æº
â”œâ”€â”€ package.json          # ä¸»é¡¹ç›®é…ç½®
â””â”€â”€ vite.config.ts        # Vite é…ç½®
```

## Electron é…ç½®

### ä¸»è¦æ–‡ä»¶è¯´æ˜

- **electron/main.js**: Electron ä¸»è¿›ç¨‹ï¼Œè´Ÿè´£åˆ›å»ºçª—å£å’Œå¤„ç†ç³»ç»Ÿçº§æ“ä½œ
- **electron/preload.js**: é¢„åŠ è½½è„šæœ¬ï¼Œæä¾›å®‰å…¨çš„ API æ¡¥æ¥
- **electron/package.json**: Electron ç‰¹å®šçš„é…ç½®å’Œæ„å»ºè®¾ç½®

### å®‰å…¨ç‰¹æ€§

- ç¦ç”¨ Node.js é›†æˆ
- å¯ç”¨ä¸Šä¸‹æ–‡éš”ç¦»
- ä½¿ç”¨é¢„åŠ è½½è„šæœ¬å®‰å…¨åœ°æš´éœ² API

## æ„å»ºç›®æ ‡

æ”¯æŒä»¥ä¸‹å¹³å°çš„æ„å»ºï¼š

- **Windows**: NSIS å®‰è£…ç¨‹åº (.exe)
- **macOS**: DMG ç£ç›˜æ˜ åƒ (.dmg)
- **Linux**: AppImage (.AppImage)

## å¼€å‘æ³¨æ„äº‹é¡¹

1. **ç¯å¢ƒå˜é‡**: ç¡®ä¿ `.env` æ–‡ä»¶åŒ…å«æ­£ç¡®çš„ Supabase é…ç½®
2. **å›¾æ ‡**: å°†åº”ç”¨å›¾æ ‡æ”¾ç½®åœ¨ `electron/assets/icon.png`
3. **è‡ªåŠ¨æ›´æ–°**: å¯ä»¥é›†æˆ electron-updater å®ç°è‡ªåŠ¨æ›´æ–°åŠŸèƒ½

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **Electron å¯åŠ¨å¤±è´¥**
   - æ£€æŸ¥ Node.js ç‰ˆæœ¬æ˜¯å¦å…¼å®¹
   - ç¡®ä¿æ‰€æœ‰ä¾èµ–éƒ½å·²æ­£ç¡®å®‰è£…

2. **æ„å»ºå¤±è´¥**
   - æ¸…ç† node_modules å¹¶é‡æ–°å®‰è£…
   - æ£€æŸ¥ electron-builder é…ç½®

3. **å¼€å‘æœåŠ¡å™¨è¿æ¥é—®é¢˜**
   - ç¡®ä¿ç«¯å£ 5173 æ²¡æœ‰è¢«å ç”¨
   - æ£€æŸ¥é˜²ç«å¢™è®¾ç½®

## éƒ¨ç½²

æ„å»ºå®Œæˆåï¼Œå¯æ‰§è¡Œæ–‡ä»¶å°†åœ¨ä»¥ä¸‹ä½ç½®ï¼š

- Windows: `electron/dist/MarCal Setup.exe`
- macOS: `electron/dist/MarCal.dmg`
- Linux: `electron/dist/MarCal.AppImage`

## æŠ€æœ¯æ ˆ

- **å‰ç«¯**: React + TypeScript + Vite
- **åç«¯**: Express + Node.js
- **æ•°æ®åº“**: Supabase (PostgreSQL)
- **æ¡Œé¢**: Electron
- **æ„å»º**: electron-builder

## è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## è®¸å¯è¯

MIT License